<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.2">
<meta name="author" content="Karl Heinz Marbaise, 2020-05-17">
<title>Integration Testing Framework Concept Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement when using as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Integration Testing Framework Concept Guide</h1>
<div class="details">
<span id="author" class="author">Karl Heinz Marbaise</span><br>
<span id="author2" class="author">2020-05-17</span><br>
<span id="revnumber">version 0.8.0-SNAPSHOT</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_what_is_this">1. What is this?</a></li>
<li><a href="#_overview">2. Overview</a></li>
<li><a href="#_structuring_integration_tests">3. Structuring Integration Tests</a>
<ul class="sectlevel2">
<li><a href="#_the_test_classes">3.1. The Test Class(es)</a></li>
<li><a href="#_test_case_execution">3.2. Test Case Execution</a></li>
<li><a href="#_parallelization">3.3. Parallelization</a></li>
</ul>
</li>
<li><a href="#_ideas">4. Ideas</a>
<ul class="sectlevel2">
<li><a href="#_separation_of_the_cache_aka_local_maven_repository">4.1. Separation of the cache (aka Local Maven Repository)</a></li>
<li><a href="#_mock_repository_manager">4.2. Mock Repository Manager</a></li>
<li><a href="#_setup_projects">4.3. Setup Projects</a></li>
<li><a href="#_general_setup_repositories">4.4. General Setup Repositories</a></li>
<li><a href="#_general_setup_repositories_incl_snapshots">4.5. General Setup Repositories incl. Snapshots</a></li>
</ul>
</li>
<li><a href="#_real_life_examples">5. Real Life Examples</a>
<ul class="sectlevel2">
<li><a href="#_maven_assembly_plugin">5.1. Maven Assembly plugin</a></li>
<li><a href="#_versions_maven_plugin">5.2. Versions Maven Plugin</a></li>
</ul>
</li>
<li><a href="#_open_things">6. Open Things</a></li>
<li><a href="#_ideas_2">7. Ideas</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_what_is_this">1. What is this?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is a concept guide for me as a developer to write down ideas and conceptional
things about the Maven Integration Testing framework.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>How I think things could be done from a user perspective</p>
</li>
<li>
<p>How I might implement things</p>
</li>
<li>
<p>What kind of limitations I think exist or not</p>
</li>
<li>
<p>I taken a deeper look into existing integration tests and check how I could handle that
with current development or what&#8217;s needed to target the issues etc.</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
This is neither the status of the development nor something which is implemented. There
are things which already implemented from this guide but they must not.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">2. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The expressiveness of tests is a very important part of writing integration tests or
test in general. If a test is not easy to understand it is very likely not being written.</p>
</div>
<div class="paragraph">
<p>Lets take a look into the following code which gives you an impression how an integration
test for a <a href="https://maven.apache.org/plugins/">Maven Plugins</a>/Maven Extensions/Maven-Core should look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.it</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.assertj.core.api.Assertions.assertThat</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenExecutionResult</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_first_test_case(MavenExecutionResult result) {
    assertThat(result)
      .build()
        .isSuccessful()
      .and()
      .project()
        .hasTarget()
          .withEarFile()
            .containsOnlyOnce(<span class="string"><span class="delimiter">&quot;</span><span class="content">META-INF/MANIFEST.MF</span><span class="delimiter">&quot;</span></span>)
        .log()
          .info().contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">Writing data to file</span><span class="delimiter">&quot;</span></span>)
      .cache()
          .withEarFile(<span class="string"><span class="delimiter">&quot;</span><span class="content">G:A:V</span><span class="delimiter">&quot;</span></span>)
          .withPomFile(<span class="string"><span class="delimiter">&quot;</span><span class="content">G:A:V</span><span class="delimiter">&quot;</span></span>)
          .withMetadata().contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">xxx</span><span class="delimiter">&quot;</span></span>);
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_structuring_integration_tests">3. Structuring Integration Tests</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_test_classes">3.1. The Test Class(es)</h3>
<div class="paragraph">
<p>The location of the above integration test defaults to <code>src/test/java/&lt;package&gt;/FirstMavenIT.java</code>.
The selected name like <code>&lt;any&gt;IT.java</code> implies that it will be executed by <a href="https://maven.apache.org/surefire/maven-failsafe-plugin/">Maven Failsafe Plugin</a>
by convention. This will result in a directory structure as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
└── src/
    └── test/
        └── java/
            └── org/
                └── it/
                    └── FirstIT.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>For the defined integration tests we need also projects which are the <strong>real test cases</strong> (Maven projects).
This needs to be put somewhere in the directory tree to be easily associated with the test <code>FirstMavenIT</code>.</p>
</div>
<div class="paragraph">
<p>The project to be used as an test case is implied to be located into
<code>src/test/resources-its/&lt;package&gt;/FirstMavenIT</code> this looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
└── src/
    └── test/
        └── resources-its/
            └── org/
                └── it/
                    └── FirstIT/</code></pre>
</div>
</div>
<div class="paragraph">
<p>But now where to put the separated <strong>test cases</strong>? This can easily achieved by using the
<strong>method name</strong> within the test class <code>FirstIT</code> which is <code>the_first_test_case</code> in our example.
This results in the following directory layout:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
└── src/
    └── test/
        └── resources-its/
            └── org/
                └── it/
                    └── FirstIT/
                        └── the_first_test_case/
                            ├── src/
                            └── pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>This approach gives us the opportunity to write several integration test cases within a
single test class <code>FirstIT</code> and also separates them easily.</p>
</div>
</div>
<div class="sect2">
<h3 id="_test_case_execution">3.2. Test Case Execution</h3>
<div class="paragraph">
<p>During the execution of the integration tests the following directory structure will be created
within the <code>target</code> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
└──target/
   └── maven-its/
       └── org/
           └── it/
               └── FirstIT/
                   └── the_first_test_case/
                       ├── .m2/
                       ├── project/
                       │   ├── src/
                       │   ├── target/
                       │   └── pom.xml
                       ├── mvn-stdout.log
                       ├── mvn-stderr.log
                       └── other logs</code></pre>
</div>
</div>
<div class="paragraph">
<p>Based on the above you can see that each test case (method within the test class) has it&#8217;s own
local cache (<code>.m2/repository</code>). Furthermore you see that the project is built within the <code>project</code>
folder. This gives you a view of the built project as you did on plain command line and take a look
into it. The output of the built is written into <code>mvn-stdout.log</code> (stdout) and the output to stderr
is written to <code>mvn-stderr.log</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_parallelization">3.3. Parallelization</h3>
<div class="paragraph">
<p>Based on the previous definitions and structure you can now derive the structure of the test cases
as well as the resulting output in <code>target</code> directory if you take a look into the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.it</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.assertj.core.api.Assertions.assertThat</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenExecutionResult</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_first_test_case(MavenExecutionResult result) {
     ...
  }
  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_second_test_case(MavenExecutionResult result) {
     ...
  }
  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_third_test_case(MavenExecutionResult result) {
     ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The structure of the Maven projects in <code>resources-its</code> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
└── src/
    └── test/
        └── resources-its/
            └── org/
                └── it/
                    └── FirstMavenIT/
                        ├── the_first_test_case/
                        │   ├── src/
                        │   └── pom.xml
                        ├── the_second_test_case/
                        │   ├── src/
                        │   └── pom.xml
                        └── the_this_test_case/
                            ├── src/
                            └── pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>The resulting structure after run will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
└──target/
   └── maven-its/
       └── org/
           └── it/
               └── FirstMavenIT/
                   └── the_first_test_case/
                   │   ├── .m2/
                   │   ├── project/
                   │   │   ├── src/
                   │   │   ├── target/
                   │   │   └── pom.xml
                   │   ├── mvn-stdout.log
                   │   ├── mvn-stderr.log
                   │   └── other logs
                   ├── the_second_test_case/
                   │   ├── .m2/
                   │   ├── project/
                   │   │   ├── src/
                   │   │   ├── target/
                   │   │   └── pom.xml
                   │   ├── mvn-stdout.log
                   │   ├── mvn-stderr.log
                   │   └── other logs
                   └── the_third_test_case/
                       ├── .m2/
                       ├── project/
                       │   ├── src/
                       │   ├── target/
                       │   └── pom.xml
                       ├── mvn-stdout.log
                       ├── mvn-stderr.log
                       └── other logs</code></pre>
</div>
</div>
<div class="paragraph">
<p>So this means we can easily parallelize the execution of each test case <code>the_first_test_case</code>,
<code>the_second_test_case</code> and <code>the_third_test_case</code> cause each test case is decoupled from each other.</p>
</div>
<div class="paragraph">
<p>to make separated from log files and local cache. The result of this setup is that each
test case is completely separated from each other test case and gives us an easy way to parallelize
the integration test cases in a simple way.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ideas">4. Ideas</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_separation_of_the_cache_aka_local_maven_repository">4.1. Separation of the cache (aka Local Maven Repository)</h3>
<div class="paragraph">
<p><code>@MavenRepository</code> should be implemented as separate Extension or separate annotation?</p>
</div>
<div class="paragraph">
<p>Currently the definition for the cache would be defined in one go with the <code>MavenJupiterExtension</code>
annotations which implies the following test cases would assume
that the cache is defined for all tests which means globally to the given
class which in the following is not correct as it is newly defined for the
<code>NestedExample</code> class.
If I redefined the <code>@MavenJupiterExtension(mavenCache=MavenCache.Global)</code> on the
nested class <code>NestedExample</code> it would result into having an other
cache for the nested class but not what I wanted to have.</p>
</div>
<div class="paragraph">
<p>So the cache definition should <strong>not</strong> being made in relationship with the <code>MavenJupiterExtension</code>
annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>(mavenCache = MavenCache.Global)
<span class="type">class</span> <span class="class">MavenIntegrationExampleNestedGlobalRepoIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> packaging_includes(MavenExecutionResult result) {
  }

  <span class="annotation">@MavenJupiterExtension</span>
  <span class="type">class</span> <span class="class">NestedExample</span> {

    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> basic(MavenExecutionResult result) {
    }

    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> packaging_includes(MavenExecutionResult result) {
    }

  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The solution would be to have a separate annotation for the <code>@MavenRepository</code>
to define the cache. So the following code shows directly that the
repository is defined on the highest class level which can be inherited
automatically.
The annotation in its default form defines the repository to be
defined in <code>.m2/repository</code>. It might be a good idea to make it configurable(?)
If we like to change the behaviour in derived class the annotation
can be added on the derived classes as well.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenRepository</span>
<span class="type">class</span> <span class="class">MavenIntegrationExampleNestedGlobalRepoIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> packaging_includes(MavenExecutionResult result) {
  }

  <span class="annotation">@MavenJupiterExtension</span>
  <span class="type">class</span> <span class="class">NestedExample</span> {

    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> basic(MavenExecutionResult result) {
    }

    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> packaging_includes(MavenExecutionResult result) {
    }

  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following gives you an impression of making the repository defined in another
directory. (This would overwrite the default.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenRepository</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">.anton</span><span class="delimiter">&quot;</span></span>)
<span class="type">class</span> <span class="class">MavenIntegrationExampleNestedGlobalRepoIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> packaging_includes(MavenExecutionResult result) {
  }

  <span class="annotation">@MavenJupiterExtension</span>
  <span class="type">class</span> <span class="class">NestedExample</span> {

    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> basic(MavenExecutionResult result) {
    }

    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> packaging_includes(MavenExecutionResult result) {
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The annotation is better decision to be open for later enhancements if we think
about separating repositories for releases, snapshots etc. So this annotation
could easily enhanced with parameters like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenRepository</span>(releases=<span class="string"><span class="delimiter">&quot;</span><span class="content">.releases</span><span class="delimiter">&quot;</span></span>, snapshots=<span class="string"><span class="delimiter">&quot;</span><span class="content">.snapshots</span><span class="delimiter">&quot;</span></span>)
<span class="type">class</span> <span class="class">IntegrationIT</span> {

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mock_repository_manager">4.2. Mock Repository Manager</h3>
<div class="paragraph">
<p>The Mock Repository Manager is as the name implies a mock for a repository.
This is sometimes useful to test things like creating releases
<a href="https://github.com/apache/maven-release/tree/master/maven-release-plugin">Maven Release Plugin</a> or define particular content for remote repositories within
integration tests for the <a href="https://github.com/mojohaus/versions-maven-plugin">Versions Maven Plugin</a>.</p>
</div>
<div class="paragraph">
<p>In general there are coming up the following questions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Based on the parallel nature of those integration tests we need to prevent using the same
port for each execution. This needs to be injected into the appropriate test run.
Usually we would use <code>localhost:Port</code> (Is <code>localhost</code> sufficient?).</p>
</li>
<li>
<p>A repository manager can be used to deploy artifacts (during a test) into it and afterwards check
the content somehow. (For example if checksum have been correctly created and deployed).</p>
</li>
<li>
<p>A repository manager could be used to download artifacts from it. ? Test Case? (Reconsider?)</p>
</li>
<li>
<p>Reuse of existing repos (filled up with special dependencies) in several tests cases to
prevent copying of all artifacts?</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenMockRepositoryManager</span>
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_first_test_case(MavenExecutionResult result) {
    <span class="comment">//</span>
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We need to assume that for the execution of Mock Repository Manager we need to have
a <code>settings.xml</code> template available which can be filled with the current values and
being placed into the resulting test case directory.</p>
</div>
<div class="paragraph">
<p>After running an integration test with support of the Mock Repository Manager
the directory structure looks like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
└──target/
   └── maven-its/
       └── org/
           └── it/
               │   settings.xml (Template)
               └── FirstMavenIT/
                   └── the_first_test_case/
                       ├── .m2/
                       ├── project/
                       │   ├── src/
                       │   ├── target/
                       │   └── pom.xml
                       ├── mvn-stdout.log
                       ├── mvn-stderr.log
                       ├── settings.xml
                       └── other logs</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are several things to be defined like the source repository which contains
artifacts <a href="https://www.mojohaus.org/mrm/mrm-maven-plugin/examples/invoker-tests.html">already installed an repository</a></p>
</div>
<div class="paragraph">
<p>The default directory where to find artifacts which are already within the repository can be
found in a directory called <code>.mrm</code> at the same level as the <code>@MavenMockRepositoryManager</code> annotation.</p>
</div>
<div class="paragraph">
<p>The position where we defined the <code>@MavenMockRepositoryManager</code> annotation shows us
on which level we would like to support the usage of it. The above example defines it
on integration test class level which means all methods/nested classes will inherit it
by default if not overwritten.</p>
</div>
<div class="paragraph">
<p>The following examples shows that the mock repository manager will only be
used for the single test case <code>the_second_test_case</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_first_test_case(MavenExecutionResult result) {
    <span class="comment">//</span>
  }

  <span class="annotation">@MavenTest</span>
  <span class="annotation">@MavenMockRepositoryManager</span>
  <span class="type">void</span> the_second_test_case(MavenExecutionResult result) {
    <span class="comment">//</span>
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we would like to have a mock repository manager should be used for a larger number
of tests we could define the annotation <code>@MavenMockRepositoryManager</code> on
a separate class/interface which is implemented/extends from for the classes which should be
used.</p>
</div>
<div class="sect3">
<h4 id="_implementation_hints">4.2.1. Implementation Hints</h4>
<div class="ulist">
<ul>
<li>
<p>Maybe we can simply use the mrm modules like <code>mrm-api</code>, <code>mrm-servlet</code> and <code>mrm-webapp</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_setup_projects">4.3. Setup Projects</h3>
<div class="paragraph">
<p>We have in general three different scenarios.</p>
</div>
<div class="ulist">
<div class="title">Scenarios</div>
<ul>
<li>
<p>Project setup for a single test case</p>
</li>
<li>
<p>Project setup for a number of test cases.</p>
</li>
<li>
<p>Global setup projects which should be executed only once.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_setup_project_for_single_test_case">4.3.1. Setup Project for single test case</h4>
<div class="paragraph">
<p>Based on the nested class option in JUnit jupiter it would be
the best approach to express that via nested class with only a single test case
and an appropriate <code>@BeforeEach</code> method which describes the pre defined
setup.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.it</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.assertj.core.api.Assertions.assertThat</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenExecutionResult</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Nested</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">FirstMavenIT</span> {
  <span class="annotation">@Nested</span>
  <span class="type">class</span> <span class="class">TestCaseWithSetup</span> {
      <span class="annotation">@BeforeEach</span>
      <span class="type">void</span> beforeEach(MavenExecutionResult result) {
        <span class="comment">//..</span>
      }

      <span class="annotation">@MavenTest</span>
      <span class="type">void</span> the_first_test_case(MavenExecutionResult result) {
         ...
      }
  }

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_first_test_case(MavenExecutionResult result) {
     ...
  }

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_second_test_case(MavenExecutionResult result) {
     ...
  }

}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_setup_project_for_a_number_of_test_cases">4.3.2. Setup Project for a number of test cases</h4>
<div class="paragraph">
<p>The best and simplest solution would be to use
the <code>@BeforeEach</code> annotation. That would make the intention of the author
easy to understand and simply being expressed.</p>
</div>
<div class="paragraph">
<p>The disadvantage of this setup would be to execute a full maven build for the
setup project within the beforeEach method for each test case method.</p>
</div>
<div class="paragraph">
<p>One issue is the question where to put the cache for all those test cases?</p>
</div>
<div class="paragraph">
<p>One requirement based on the above idea is to use the same cache for
the beforeEach and the appropriate test case.
What about parallelization?
The beforeEach and the particular test case must be using the same cache
otherwise we have no relationship between the beforeEach method and the particular
test cases? Is this a good idea? (We have made the assumption if not defined different
that each test case is using a separate cache)
It could assumed having a global cache for test cases which are within the nested class?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.it</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.assertj.core.api.Assertions.assertThat</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenExecutionResult</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.BeforeEach</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@BeforeEach</span>
  <span class="type">void</span> beforeEach(MavenExecutionResult result) {
    <span class="comment">//..</span>
  }

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_first_test_case(MavenExecutionResult result) {
     <span class="comment">//...</span>
  }

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_second_test_case(MavenExecutionResult result) {
     <span class="comment">//...</span>
  }
  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_third_test_case(MavenExecutionResult result) {
     <span class="comment">//...</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Baseds on the previously written the conclusion would be to make it possible
to use inheritance between the test classes to express a setup/beforeach for a hierarchie
of integration test cases which from my point of view sounds like a bad idea?
Need to reconsider?</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_general_setup_repositories">4.4. General Setup Repositories</h3>
<div class="paragraph">
<p>General Setup repositories which already contains particular dependencies which are needed
for test cases. Here we need to make it possible having a local repository to be pre defined
on a test case base or on test class or even on several classes or all tests.</p>
</div>
<div class="paragraph">
<p>The simplest solution would be to create a directory called something like <code>.predefined-repo</code> in
a particular directory level which implies that this directory will be used as a repository.
This can be taken as a pre installed local cache with particular dependencies etc.</p>
</div>
<div class="paragraph">
<p>Let us take a look at the example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
└── src/
    └── test/
        └── resources-its/
            └── org/
                └── it/
                    └── FirstIT/
                        └── the_first_test_case/
                            ├── .predefined-repo
                            ├── src/
                            └── pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>This would mean that the <code>.predefined-repo</code> contains already installed artifacts etc.
which can be used to run a test against this based on the method name <code>the_first_test_case</code>
this is limited to a single test method.</p>
</div>
<div class="paragraph">
<p>This can be made a more general thing to define it on a class level like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
└── src/
    └── test/
        └── resources-its/
            └── org/
                └── it/
                    └── FirstIT/
                        ├── .predefined-repo
                        └── the_first_test_case/
                        │   ├── src/
                        │   └── pom.xml
                        └── the_second_test_case/
                            ├── src/
                            └── pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>This would mean having a predefined repository defined for all test cases within the whole
test class (<code>the_first_test_case</code> and <code>the_second_test_case</code>).</p>
</div>
<div class="paragraph">
<p>If we move that directory level up like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
└── src/
    └── test/
        └── resources-its/
            └── org/
                └── it/
                    ├── .predefined-repo
                    └── FirstIT/
                        └── the_first_test_case/
                            ├── src/
                            └── pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>This would mean that the predefined repository is available for all integration test
classes within the whole package inclusive all sub packages.</p>
</div>
</div>
<div class="sect2">
<h3 id="_general_setup_repositories_incl_snapshots">4.5. General Setup Repositories incl. Snapshots</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
└── src/
    └── test/
        └── resources-its/
            └── org/
                └── it/
                    └── FirstIT/
                        └── the_first_test_case/
                            ├── .pre-release-repo
                            ├── .pre-snapshot-repo
                            ├── src/
                            └── pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>This would mean that the <code>.pre-release-repo</code> contains already installed artifacts etc.
The <code>.pre-snapshot-repo</code> contains snapshots of particular aritifacts.</p>
</div>
<div class="paragraph">
<p>To get above usable in Maven you have to have a <code>settings.xml</code> which contains the appropriate
configuration which looks like this:</p>
</div>
<div class="paragraph">
<p>We have to define the <code>central</code> repo and the snapshot repo. This will limit
the access of this build to outside repositories.</p>
</div>
<div class="listingblock">
<div class="title">settings.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;settings&gt;</span>
    <span class="tag">&lt;profiles&gt;</span>
        <span class="tag">&lt;profile&gt;</span>
            <span class="tag">&lt;id&gt;</span>it-repo<span class="tag">&lt;/id&gt;</span>
            <span class="tag">&lt;activation&gt;</span>
                <span class="tag">&lt;activeByDefault&gt;</span>true<span class="tag">&lt;/activeByDefault&gt;</span>
            <span class="tag">&lt;/activation&gt;</span>
            <span class="tag">&lt;repositories&gt;</span>
                <span class="tag">&lt;repository&gt;</span>
                    <span class="tag">&lt;id&gt;</span>local.central<span class="tag">&lt;/id&gt;</span>
                    <span class="tag">&lt;url&gt;</span>file:///Users/xxx/.m2/repository<span class="tag">&lt;/url&gt;</span>
                    <span class="tag">&lt;releases&gt;</span>
                        <span class="tag">&lt;enabled&gt;</span>true<span class="tag">&lt;/enabled&gt;</span>
                    <span class="tag">&lt;/releases&gt;</span>
                    <span class="tag">&lt;snapshots&gt;</span>
                        <span class="tag">&lt;enabled&gt;</span>true<span class="tag">&lt;/enabled&gt;</span>
                    <span class="tag">&lt;/snapshots&gt;</span>
                <span class="tag">&lt;/repository&gt;</span>
                <span class="tag">&lt;repository&gt;</span>
                    <span class="tag">&lt;id&gt;</span>local.snapshot<span class="tag">&lt;/id&gt;</span>
                    <span class="tag">&lt;url&gt;</span>file:///Users/xxxx/project/m2snapshots<span class="tag">&lt;/url&gt;</span>
                    <span class="tag">&lt;releases&gt;</span>
                        <span class="tag">&lt;enabled&gt;</span>false<span class="tag">&lt;/enabled&gt;</span>
                    <span class="tag">&lt;/releases&gt;</span>
                    <span class="tag">&lt;snapshots&gt;</span>
                        <span class="tag">&lt;enabled&gt;</span>true<span class="tag">&lt;/enabled&gt;</span>
                    <span class="tag">&lt;/snapshots&gt;</span>
                <span class="tag">&lt;/repository&gt;</span>
            <span class="tag">&lt;/repositories&gt;</span>
            <span class="tag">&lt;pluginRepositories&gt;</span>
                <span class="tag">&lt;pluginRepository&gt;</span>
                    <span class="tag">&lt;id&gt;</span>local.central<span class="tag">&lt;/id&gt;</span>
                    <span class="tag">&lt;url&gt;</span>file:///Users/khmarbaise/.m2/repository<span class="tag">&lt;/url&gt;</span>
                    <span class="tag">&lt;releases&gt;</span>
                        <span class="tag">&lt;enabled&gt;</span>true<span class="tag">&lt;/enabled&gt;</span>
                    <span class="tag">&lt;/releases&gt;</span>
                    <span class="tag">&lt;snapshots&gt;</span>
                        <span class="tag">&lt;enabled&gt;</span>true<span class="tag">&lt;/enabled&gt;</span>
                    <span class="tag">&lt;/snapshots&gt;</span>
                <span class="tag">&lt;/pluginRepository&gt;</span>
            <span class="tag">&lt;/pluginRepositories&gt;</span>
        <span class="tag">&lt;/profile&gt;</span>
    <span class="tag">&lt;/profiles&gt;</span>
<span class="tag">&lt;/settings&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_real_life_examples">5. Real Life Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Within this chapter we describe different integration test cases which are done in integration
tests with maven-invoker or with other tests for different maven plugins etc. to see
if we missed something which is needed to get that framework forward.</p>
</div>
<div class="sect2">
<h3 id="_maven_assembly_plugin">5.1. Maven Assembly plugin</h3>
<div class="sect3">
<h4 id="_custom_containerdescriptorhandler_test_case">5.1.1. Custom-ContainerDescriptorHandler Test Case</h4>
<div class="paragraph">
<p><a href="https://github.com/apache/maven-assembly-plugin/blob/master/src/it/projects/container-descriptors/custom-containerDescriptorHandler" class="bare">https://github.com/apache/maven-assembly-plugin/blob/master/src/it/projects/container-descriptors/custom-containerDescriptorHandler</a></p>
</div>
<div class="paragraph">
<p>Example Test case <code>custom-containerDescriptorHandler</code> from Maven Assembly Plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>custom-containerDescriptorHandler (master)$ tree
.
├── assembly
│   ├── a.properties
│   ├── pom.xml
│   └── src
│       ├── assemble
│       │   └── bin.xml
│       └── config
│           ├── a
│           │   └── file.txt
│           └── b
│               └── file.txt
├── handler-def
│   ├── pom.xml
│   └── src
│       └── main
│           └── resources
│               └── META-INF
│                   └── plexus
│                       └── components.xml
├── invoker.properties
├── pom.xml <b class="conum">(1)</b>
└── verify.bsh</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>What is the purpose of this pom file?</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Based on the <code>invoker.properties</code> file this test case is divided into two steps:
The first step is to <code>install</code> the <code>handler-def</code> project into local cache and
second run <code>package</code> phase on the project <code>assembly</code>.</p>
</div>
<div class="listingblock">
<div class="title">invoker.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">invoker.project.1=handler-def
invoker.goals.1=install

invoker.project.2=assembly
invoker.goals.2=package</code></pre>
</div>
</div>
<div class="paragraph">
<p>The question is coming up how can we translate that to the new integration test framework.
The simple answer is like this:</p>
</div>
<div class="listingblock">
<div class="title">CustomContainerDescriptorHandlerIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.it</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.soebes.itf.extension.assertj.MavenITAssertions.assertThat</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenRepository</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenExecutionResult</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.MethodOrderer.OrderAnnotation</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Order</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.TestMethodOrder</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenRepository</span>
<span class="annotation">@TestMethodOrder</span>(OrderAnnotation.class)
<span class="type">class</span> <span class="class">CustomContainerDescriptorHandlerIT</span> {

  <span class="annotation">@MavenTest</span>(goals = {<span class="string"><span class="delimiter">&quot;</span><span class="content">install</span><span class="delimiter">&quot;</span></span>})
  <span class="annotation">@Order</span>(<span class="integer">10</span>)
  <span class="type">void</span> handler_ref(MavenExecutionResult result) {
    assertThat(result).isSuccessful();
  }

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> assembly(MavenExecutionResult result) {
    assertThat(result).isSuccessful();
    <span class="comment">// check content of the `assembly/target/ directory</span>
    <span class="comment">// Details see https://github.com/apache/maven-assembly-plugin/blob/master/src/it/projects/container-descriptors/custom-containerDescriptorHandler/verify.bsh</span>
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Currently this test case contains a single issue which means it uses an project
which is run as a general setup project from <a href="https://maven.apache.org/plugins/maven-invoker-plugin">Maven Invoker Plugin</a>.
<a href="https://github.com/apache/maven-assembly-plugin/tree/master/src/it/it-project-parent" class="bare">https://github.com/apache/maven-assembly-plugin/tree/master/src/it/it-project-parent</a></p>
</div>
<div class="paragraph">
<p>Based on this setup you will get separated log files for each run in it&#8217;s own directory not concatenated
into a single file.</p>
</div>
</div>
<div class="sect3">
<h4 id="_grouping_test_cases">5.1.2. Grouping Test Cases</h4>
<div class="paragraph">
<p>This will result in grouping tests within the single class.</p>
</div>
<div class="paragraph">
<p>Thinking into another level a test could look like this:</p>
</div>
<div class="listingblock">
<div class="title">ContainerDescriptorHandlerIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.it</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.soebes.itf.extension.assertj.MavenITAssertions.assertThat</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenRepository</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenExecutionResult</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.MethodOrderer.OrderAnnotation</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Nested</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Order</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.TestMethodOrder</span>;

<span class="annotation">@TestMethodOrder</span>(OrderAnnotation.class)
<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">ContainerDescriptorsIT</span> {

  <span class="annotation">@Nested</span>
  <span class="annotation">@MavenRepository</span>
  <span class="type">class</span> <span class="class">CustomContainerDescriptorHandler</span> {

    <span class="annotation">@MavenTest</span>(goals = {<span class="string"><span class="delimiter">&quot;</span><span class="content">install</span><span class="delimiter">&quot;</span></span>})
    <span class="annotation">@Order</span>(<span class="integer">10</span>)
    <span class="type">void</span> handler_ref(MavenExecutionResult result) {
      assertThat(result).isSuccessful();
    }

    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> assembly(MavenExecutionResult result) {
      assertThat(result).isSuccessful();
      <span class="comment">// check content of the `assembly/target/ directory</span>
      <span class="comment">// Details see https://github.com/apache/maven-assembly-plugin/blob/master/src/it/projects/container-descriptors/custom-containerDescriptorHandler/verify.bsh</span>
    }
  }

  <span class="annotation">@Nested</span>
  <span class="annotation">@MavenRepository</span>
  <span class="type">class</span> <span class="class">ConfiguredHandler</span> {

    <span class="annotation">@MavenTest</span>(goals = {<span class="string"><span class="delimiter">&quot;</span><span class="content">install</span><span class="delimiter">&quot;</span></span>})
    <span class="annotation">@Order</span>(<span class="integer">10</span>)
    <span class="type">void</span> handler_ref(MavenExecutionResult result) {
      assertThat(result).isSuccessful();
    }

    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> assembly(MavenExecutionResult result) {
      assertThat(result).isSuccessful();
      <span class="comment">// check content of the `assembly/target/ directory</span>
      <span class="comment">// Details see https://github.com/apache/maven-assembly-plugin/blob/master/src/it/projects/container-descriptors/custom-containerDescriptorHandler/verify.bsh</span>
    }
  }

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_versions_maven_plugin">5.2. Versions Maven Plugin</h3>
<div class="sect3">
<h4 id="_the_test_case_example_1">5.2.1. The Test case Example 1</h4>
<div class="paragraph">
<p>Several of the integration test cases for the <a href="https://github.com/mojohaus/versions-maven-plugin">Versions Maven Plugins</a> are using the following
content for the <code>invoker.properties</code> (or very similar)</p>
</div>
<div class="listingblock">
<div class="title">invoker.properites</div>
<div class="content">
<pre class="CodeRay highlight"><code>invoker.goals=${project.groupId}:${project.artifactId}:${project.version}:compare-dependencies
invoker.systemPropertiesFile = test.properties</code></pre>
</div>
</div>
<div class="paragraph">
<p>and the <code>test.properties</code> files looks like this:</p>
</div>
<div class="listingblock">
<div class="title">test.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code>remotePom=localhost:dummy-bom-pom:1.0
reportOutputFile=target/depDiffs.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>so the first part in <code>invoker.properties</code> which contains <code>invoker.goals</code> means to call Maven like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">mvn ${project.groupId}:${project.artifactId}:${project.version}:compare-dependencies</code></pre>
</div>
</div>
<div class="paragraph">
<p>where a placeholder <code>${project.groupId}</code> is being replaced with the <code>groupId</code> of the project (plugin)
which the tests should run on. <code>${project.artifactId}</code> will be replaced with the <code>artifactId</code> and
<code>${project.version}</code> with the version of the project. In the end a call will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">mvn org.codehaus.mojo:versions-maven-plugin:2.7.0-SNAPSHOT:compare-dependencies</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let us come to the <code>test.properties</code> which is simply being translated to the following:
(backslashes are only added to make it more readable)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">mvn org.codehaus.mojo:versions-maven-plugin:2.7.0-SNAPSHOT:compare-dependencies \
    -DremotePom=&quot;localhost:dummy-bom-pom:1.0&quot; \
    -DreportOutputFile=&quot;target/depDiffs.txt&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let us assume we could translate that very easy:</p>
</div>
<div class="listingblock">
<div class="title">FirstIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">CustomContainerDescriptorHandlerIT</span> {

  <span class="annotation">@MavenTest</span>(goals = {<span class="string"><span class="delimiter">&quot;</span><span class="content">${project.groupId}:${project.artifactId}:${project.version}:compare-dependencies</span><span class="delimiter">&quot;</span></span>})
  <span class="type">void</span> calling_a_goal(...) {
    ...
  }

  <span class="annotation">@MavenTest</span>(goals = {<span class="string"><span class="delimiter">&quot;</span><span class="content">${project.groupId}:${project.artifactId}:${project.version}:compare-dependencies</span><span class="delimiter">&quot;</span></span>},
    systemProperties = {
      <span class="string"><span class="delimiter">&quot;</span><span class="content">remotePom=localhost:dummy-bom-pom:1.0</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">reportOutputFile=target/depDiffs.txt</span><span class="delimiter">&quot;</span></span>
  })
  <span class="type">void</span> calling_a_goal_with_sytem_properties(...) {
    ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now I&#8217;m asking why do we use this bunch of placeholders
<code>${project.groupId}:${project.artifactId}:${project.version}</code>. Only based on the fear that the groupId
or artifactId or version could change. A change in groupId or artifactId is very rare. I&#8217;ve never seen
a change in groupId nor artifactId in plugin projects. What changes more often is the
version of the artifact which means with each release. So  it would make sense to define for the
version a placeholder like <code>${project.version}</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Based on the approach to simply read the <code>pom.xml</code> file of the project under test this
can be solved easily. This makes it also possible to run the IT within the IDE.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_testcase">5.2.2. Testcase</h4>

</div>
<div class="sect3">
<h4 id="_test_case_it_set_001">5.2.3. Test Case IT-SET-001</h4>
<div class="paragraph">
<p>The following <code>invoker.properties</code> describes a test case which comprises of two consecutive calls of
Maven on the same directory (project):</p>
</div>
<div class="listingblock">
<div class="title">it-set-001</div>
<div class="content">
<pre class="CodeRay highlight"><code>invoker.goals.1=${project.groupId}:${project.artifactId}:${project.version}:set -DnewVersion=2.0
invoker.nonRecursive.1=true
invoker.buildResult.1=success

invoker.goals.2=${project.groupId}:${project.artifactId}:${project.version}:set -DnewVersion=2.0 -DgroupId=* -DartifactId=* -DoldVersion=*
invoker.nonRecursive.2=true
invoker.buildResult.2=success
invoker.description.2=Test the set mojo when the new version is the same as the old version, using wildcards. This kind of build used to fail accourding the issue 83 from github.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above means to execute on the same project several executions of maven calls. This breaks at the moment
the idea of separation of the builds by method.</p>
</div>
<div class="paragraph">
<p>This might be expressed by using <code>@MavenProject</code> annotation which defines such thing.
The name of the method can be a sub directory which contains <code>mvn-stdout.log</code> etc.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
We should make the <code>@MavenRepository</code> part of <code>@MavenProject</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">ITSETIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@TestMethodOrder</span>(OrderAnnotation.class)
<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">setVersionIT</span> {

  <span class="annotation">@Nested</span>
  <span class="annotation">@MavenRepository</span>
  <span class="annotation">@MavenProject</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">set_001</span><span class="delimiter">&quot;</span></span>) <span class="comment">//Define the project to be used. Only valid on Nested class or root class.</span>
  <span class="annotation">@DisplayName</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Test the set mojo when the new version is the same as the old version, using wildcards. This kind of build used to fail accourding the issue 83 from github.</span><span class="delimiter">&quot;</span></span>)
  <span class="type">class</span> <span class="class">Set001</span> {
    <span class="annotation">@MavenTest</span>(options = {<span class="string"><span class="delimiter">&quot;</span><span class="content">-N</span><span class="delimiter">&quot;</span></span>}, goals = { <span class="string"><span class="delimiter">&quot;</span><span class="content">${project.groupId}:${project.artifactId}:${project.version}:set</span><span class="delimiter">&quot;</span></span>}
      systemProperties = {<span class="string"><span class="delimiter">&quot;</span><span class="content">newVersion=2.0</span><span class="delimiter">&quot;</span></span>})
    <span class="annotation">@Order</span>(<span class="integer">10</span>)
    <span class="type">void</span> first_test(MavenExecutionResult result) {
      assertThat(result).isSuccessful();
    }

    <span class="annotation">@MavenTest</span>(options = {<span class="string"><span class="delimiter">&quot;</span><span class="content">-N</span><span class="delimiter">&quot;</span></span>}, goals = { <span class="string"><span class="delimiter">&quot;</span><span class="content">${project.groupId}:${project.artifactId}:${project.version}:set</span><span class="delimiter">&quot;</span></span>}
      systemProperties = {<span class="string"><span class="delimiter">&quot;</span><span class="content">newVersion=2.0</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">groupId=*</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">artifactId=*</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">DoldVersion=*</span><span class="delimiter">&quot;</span></span>})
    <span class="annotation">@Order</span>(<span class="integer">20</span>)
    <span class="annotation">@DisplayName</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">where setup two is needed.</span><span class="delimiter">&quot;</span></span>)
    <span class="type">void</span> second_test(MavenExecutionResult result) {
      assertThat(result).isFailure();
    }

}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_test_case_update_child_modules_001">5.2.4. Test Case UPDATE-CHILD-MODULES-001</h4>
<div class="paragraph">
<p>Think about the following:</p>
</div>
<div class="listingblock">
<div class="title">invoker.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code># first check that the root project builds ok
invoker.goals.1=-o validate
invoker.nonRecursive.1=true
invoker.buildResult.1=success

# second check that adding the child project into the mix breaks things
invoker.goals.2=-o validate
invoker.nonRecursive.2=false
invoker.buildResult.2=failure

# third fix the build with our plugin
invoker.goals.3=${project.groupId}:${project.artifactId}:${project.version}:update-child-modules
invoker.nonRecursive.3=true
invoker.buildResult.3=success

# forth, confirm that the build is fixed
invoker.goals.4=validate
invoker.nonRecursive.4=false
invoker.buildResult.4=success</code></pre>
</div>
</div>
<div class="paragraph">
<p>This could be translated into the following:</p>
</div>
<div class="listingblock">
<div class="title">UpdateChildModuleIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@TestMethodOrder</span>(OrderAnnotation.class)
<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">UpdateChildModuleIT</span> {

  <span class="annotation">@Nested</span>
  <span class="annotation">@MavenRepository</span>
  <span class="annotation">@MavenProject</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">name-x</span><span class="delimiter">&quot;</span></span>) <span class="comment">//Define the project to be used.</span>
  <span class="type">class</span> <span class="class">One</span> {
    <span class="annotation">@MavenTest</span>(options = {<span class="string"><span class="delimiter">&quot;</span><span class="content">-o</span><span class="delimiter">&quot;</span></span>}, goals = { <span class="string"><span class="delimiter">&quot;</span><span class="content">validate</span><span class="delimiter">&quot;</span></span> })
    <span class="annotation">@Order</span>(<span class="integer">10</span>)
    <span class="type">void</span> first_test(MavenExecutionResult result) {
      assertThat(result).isSuccessful();
    }

    <span class="annotation">@MavenTest</span>(options = {<span class="string"><span class="delimiter">&quot;</span><span class="content">-o</span><span class="delimiter">&quot;</span></span>}, goals = { <span class="string"><span class="delimiter">&quot;</span><span class="content">validate</span><span class="delimiter">&quot;</span></span> })
    <span class="annotation">@Order</span>(<span class="integer">20</span>)
    <span class="annotation">@DisplayName</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">where setup two is needed.</span><span class="delimiter">&quot;</span></span>)
    <span class="type">void</span> second_test(MavenExecutionResult result) {
      assertThat(result).isFailure();
    }

    <span class="annotation">@MavenTest</span>(options = {<span class="string"><span class="delimiter">&quot;</span><span class="content">-N</span><span class="delimiter">&quot;</span></span>}, goals = { <span class="string"><span class="delimiter">&quot;</span><span class="content">${project.groupId}:${project.artifactId}:${project.version}:update-child-modules</span><span class="delimiter">&quot;</span></span> })
    <span class="annotation">@Order</span>(<span class="integer">30</span>)
    <span class="annotation">@DisplayName</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">where setup two is needed.</span><span class="delimiter">&quot;</span></span>)
    <span class="type">void</span> third_test(MavenExecutionResult result) {
      assertThat(result).isSuccessful();
    }

    <span class="annotation">@MavenTest</span>(goals = { <span class="string"><span class="delimiter">&quot;</span><span class="content">validate</span><span class="delimiter">&quot;</span></span> })
    <span class="annotation">@Order</span>(<span class="integer">10</span>)
    <span class="type">void</span> forth_test(MavenExecutionResult result) {
      assertThat(result).isSuccessful();
    }
  }

}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_open_things">6. Open Things</h2>
<div class="sectionbody">
<div class="ulist checklist">
<div class="title">Things which currently not working or net yet tested/thought about</div>
<ul class="checklist">
<li>
<p>&#10063; A build/tool(s) running without relation to Maven?
This means we only need to define what we start simply a different thing than Maven.
Would we like to support this?</p>
</li>
<li>
<p>&#10063; POM Less builds currently not tried. Calling only a goal like <code>site:stage</code> ?</p>
</li>
<li>
<p>&#10063; Setup projects which should be run</p>
</li>
<li>
<p>&#10063; General Setup repositories which already contain particular dependencies which are needed
for test cases. Here we need to make it possible having a local repository to be pre defined
on a test case or on a more general way.</p>
</li>
<li>
<p>&#10063; Support for a mock repository manager (mrm) to make tests cases with deploy/releases
etc. possible. A thought might be to integrate the functionality of mrm into this
extension and somehow configure that for the test cases?</p>
</li>
<li>
<p>&#10063; Support for <a href="https://www.mojohaus.org/mrm/index.html">Mock Repository Manager</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ideas_2">7. Ideas</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>If we change the code of a plugin within the IDE the Integration test will not test
against the changed code only against the latest built jar files.
The IDE compiles the changes code into <code>target/classes</code>&#8230;&#8203; something about the classpath?</p>
</li>
<li>
<p>Tricky idea:
If we start an integration test we could check if the class files are newer than the created jar
file and build via <code>mvn package</code> the project under test and copy them into the appropriate
directories and then run the test as usual.</p>
</li>
<li>
<p>Assertion Idea</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>    assertThat(result)
      .project()
        .hasTarget()
          .withEarFile()
            .containsOnlyOnce("META-INF/MANIFEST.MF");

    assertThat(result)
      .project()
        .log()
          .info().contains("Writing data to file");

    assertThat(result)
      .cache()
          .hasEarFile("G:A:V")
          .hasPomFile("G:A:V")
          .hasMetadata("G:A")
            .contains("xxx");</pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.8.0-SNAPSHOT<br>
Last updated 2020-05-17 11:25:41 UTC
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>